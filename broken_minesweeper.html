<html>
  <head>
    <title>Minesweeper</title>
    <script
      type="text/javascript"
      src="http://worksheets.stanford.edu/epilog/javascript/epilog.js"
    ></script>
    <script
      type="text/javascript"
      src="http://worksheets.stanford.edu/worksheets/javascript/worksheets.js"
    ></script>
  </head>

  <body onload="initialize()" style="background-color: rgb(192, 192, 192);">
    <center>
      <td width="500" height="70" align="center">
        <span style="font-family: Futura; font-size: 36px; color: black">MINESWEEPER</span>
      </td>
      <br />
      <span style="font-family: Futura;font-size: 18px; color: #666666"
        >click in a clear square to reveal its status</span
      >
      <br/>
      <div id="p2result" align="center" style="font-family: Futura;color:red; font-size: 32px;"></div>
      <table bgcolor="#dcdcdc" cellspacing="0" border="1">
        <tbody>
          <tr>
            <td
              id="mark(1,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(1,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(2,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(2,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(3,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(3,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(4,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(4,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(5,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(5,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(6,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(6,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(7,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(7,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(8,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(8,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
          <tr>
            <td
              id="mark(9,1)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,2)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,3)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,4)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,5)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,6)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,7)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,8)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
            <td
              id="mark(9,9)"
              width="60"
              height="60"
              align="center"
              valign="center"
              style="font-family: helvetica; font-size: 28pt; cursor: pointer"
              onclick="modbutton(this)"
            ></td>
          </tr>
        </tbody>
      </table>
    </center>
  </body>
  <dataset id="lambda" style="display: none">
    file(1)
    file(2)
    file(3)
    file(4)
    file(5)
    file(6)
    file(7)
    file(8)
    file(9)

    rank(1)
    rank(2)
    rank(3)
    rank(4)
    rank(5)
    rank(6)
    rank(7)
    rank(8)
    rank(9)

    succ(1,2)
    succ(2,3)
    succ(3,4)
    succ(4,5)
    succ(5,6)
    succ(6,7)
    succ(7,8)
    succ(8,9)
    succ(a,b)
    succ(b,c)
    succ(c,d)
    succ(d,e)
    succ(e,f)
    succ(f,g)
    succ(g,h)
    succ(h,i)

    <!-- Cell syntax: cell(<column>, <row>, <contents>) -->
    <!-- Possible contents of cell:
        - "mine", "b" are unclicked, so should be rendered the same
        - numberSurroundingMines for clicked b, so should render the number
        - "clickedMine" for clicked mine, so should render a mine -->
    <!-- b cells (all cells with mine cells deleted)-->
    cell(2, 1, b, u)
    cell(3, 1, b, u)
    cell(4, 1, b, u)
    cell(5, 1, b, u)
    cell(6, 1, b, u)
    cell(7, 1, b, u)
    cell(8, 1, b, u)
    cell(9, 1, b, u)
    cell(1, 2, b, u)

    cell(3, 2, b, u)
    cell(4, 2, b, u)
    cell(5, 2, b, u)
    cell(6, 2, b, u)
    cell(7, 2, b, u)
    cell(8, 2, b, u)
    cell(9, 2, b, u)
    cell(1, 3, b, u)
    cell(2, 3, b, u)

    cell(4, 3, b, u)
    cell(5, 3, b, u)
    cell(6, 3, b, u)
    cell(7, 3, b, u)
    cell(8, 3, b, u)
    cell(9, 3, b, u)
    cell(1, 4, b, u)
    cell(2, 4, b, u)
    cell(3, 4, b, u)

    cell(5, 4, b, u)
    cell(6, 4, b, u)
    cell(7, 4, b, u)
    cell(8, 4, b, u)
    cell(9, 4, b, u)
    cell(1, 5, b, u)
    cell(2, 5, b, u)
    cell(3, 5, b, u)
    cell(4, 5, b, u)

    cell(6, 5, b, u)
    cell(7, 5, b, u)
    cell(8, 5, b, u)
    cell(9, 5, b, u)
    cell(1, 6, b, u)
    cell(2, 6, b, u)
    cell(3, 6, b, u)
    cell(4, 6, b, u)
    cell(5, 6, b, u)

    cell(7, 6, b, u)
    cell(8, 6, b, u)
    cell(9, 6, b, u)
    cell(1, 7, b, u)
    cell(2, 7, b, u)
    cell(3, 7, b, u)
    cell(4, 7, b, u)
    cell(5, 7, b, u)
    cell(6, 7, b, u)

    cell(8, 7, b, u)
    cell(9, 7, b, u)
    cell(1, 8, b, u)
    cell(2, 8, b, u)
    cell(3, 8, b, u)
    cell(4, 8, b, u)
    cell(5, 8, b, u)
    cell(6, 8, b, u)
    cell(7, 8, b, u)

    cell(9, 8, b, u)
    cell(1, 9, b, u)
    cell(2, 9, b, u)
    cell(3, 9, b, u)
    cell(4, 9, b, u)
    cell(5, 9, b, u)
    cell(6, 9, b, u)
    cell(7, 9, b, u)
    cell(8, 9, b, u)


    <!-- mines (currently set up in diagonal) -->
    cell(1, 1, mine, u)
    cell(2, 2, mine, u)
    cell(3, 3, mine, u)
    cell(4, 4, mine, u)
    cell(5, 5, mine, u)
    cell(6, 6, mine, u)
    cell(7, 7, mine, u)
    cell(8, 8, mine, u)
    cell(9, 9, mine, u)

  </dataset>
  <ruleset id="library" style="display: none">
    <!-- first click sets flag -->
    click(mark(M,N)) :: cell(M, N, b, u) ==> ~cell(M, N, b, u) & cell(M, N, b, f)
    click(mark(M,N)) :: cell(M, N, mine, u) ==> ~cell(M, N, mine, u) & cell(M, N, mine, f)
    <!-- second click reveals cell -->
    click(mark(M,N)) :: cell(M, N, b, f) ==> reveal(M, N) & clearAdjacent(M, N) 
    click(mark(M,N)) :: cell(M, N, mine, f) ==> exploded & ~cell(M, N, mine, f) & cell(M, N, "&#128163;", u)

    <!-- currently broken -->
    reveal(M, N) :: cell(M, N, b, Z) & evaluate(countofall(cell(X, Y, mine, u) | cell(X, Y, mine, f), (cell(X, Y, mine, u) | cell(X, Y, mine, f)) & adjacent(M, N, X, Y)), NumMines) ==> ~cell(M, N, b, f) & cell(M, N, NumMines, u) 
    hasClearSurroundings(M, N) :- evaluate(countofall(cell(X, Y, mine, u) | cell(X, Y, mine, f), (cell(X, Y, mine, u) | cell(X, Y, mine, f)) & adjacent(M, N, X, Y)), 0)

    adjHelper(A, B) :- or(succ(A, B), succ(B, A))
    adjacent(M, N, X, Y) :- file(X) & rank(Y) & or(adjHelper(X, M) &adjHelper(Y, N), adjHelper(X, M) &same(Y, N), same(X, M) &adjHelper(Y, N))
    clearAdjacent(M, N) :: hasClearSurroundings(M, N) & adjacent(M, N, X, Y) & cell(X, Y, b, Z) ==> reveal(X, Y)

    legal(M,N) :- cell(M,N,b,u) | cell(M,N,mine,u) | cell(M,N,b,f) | cell(M,N,mine,f) 
    open :- cell(M,N,b,u) | cell(M,N,b,f)

    terminal :- exploded | ~open

    goal(p2,victory) :- ~cell(M, N, b, Z) & ~exploded
    goal(p2, died) :- exploded


    innerhtml(mark(M,N),"&#128681;") :- cell(M,N,W,Z) & same(Z, f)
    innerhtml(mark(M,N),"&#128163;") :- terminal & cell(M,N,W,Z) & distinct(W, b)
    innerhtml(mark(R,C), W) :- cell(R,C,W,Z) & distinct(W,b) & distinct(W, mine)
    attribute(mark(R,C),"onclick",true) :- terminal & cell(R,C,W,Z) & distinct(W,x)

    style(mark(R,C),"cursor","text") :- cell(R,C,W,Z) & distinct(W,b) & distinct(W, mine)
    style(mark(R,C),"cursor","text") :- exploded & cell(R, C, W, Z)
    style(mark(R, C), color, red) :- cell(R, C, 3, Z)
    style(mark(R, C), color, tomato) :- cell(R, C, 2, Z)
    style(mark(R, C), color, orange) :- cell(R, C, 1, Z)
    style(mark(R, C), color, royalblue) :- cell(R, C, 0, Z)
  </ruleset>
</html>

